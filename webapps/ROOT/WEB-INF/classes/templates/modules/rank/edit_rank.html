<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="${request.contextPath}/statics/css/element.css">

<title>编辑榜单</title>
</head>
<body>
    <#include "/header.html">
    <div class="cvpage_title_common">编辑榜单</div>
    <div id="edit_rank" class="cv_page_content">

        <!--树形结构主页面开始 0 -->
        <div v-show="showChildPage == 0">

            <!--树形结构区-->
            <div class="cv_content_square">
                <!--功能按钮区-->
                <el-row class="el-row-h70">
                    <el-col :span="4">
                        <el-button type="primary" style="width:100%" icon="el-icon-plus" @click="addNewLevelOrRank">添加目录/榜单</el-button>
                    </el-col>
                    <el-col :span="4" :offset="16">
                        <el-button style="width:100%" @click="backToRankList">返回榜单列表</el-button>
                    </el-col>
                </el-row>
                <div class="custom-tree-container">
                    <el-tree
                        style="margin-top:15px;"
                        :data="rankDataTree"
                        node-key="id"
                        default-expand-all
                        :expand-on-click-node="false"
                        :indent="30">
                        <span class="custom-tree-node" slot-scope="{ node, data }">
                            <span v-if="data.level == 1 && data.type == 0" style="max-width:450px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size: 15px; color: rgb(0, 0, 0);font-weight: 700;" v-text="data.name"></span>
                            <span v-if="data.level == 2 && data.type == 0" style="max-width:450px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size: 15px; color: rgb(0, 57, 170);font-weight: 700;" v-text="data.name"></span>
                            <span v-if="data.level == 3 && data.type == 0" style="max-width:450px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size: 15px; color: rgb(4, 118, 248);font-weight: 700;" v-text="data.name"></span>
                            <span v-if="data.level == 4 && data.type == 0" style="max-width:450px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size: 15px; color: rgb(4, 117, 0);font-weight: 700;" v-text="data.name"></span>
                            <span v-if="data.type !== 0" style="max-width:450px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size: 15px; color: rgb(211, 65, 7);" v-text="data.name"></span>
                            <!-- <span>权重:{{ data.weight }}</span>
                            <span>级别:{{ data.level }}</span>
                            <span>最后:{{ data.end }}</span> -->
                            <div>
                                <el-button v-if="data.end !== 1" type="text" size="mini" @click="appendLevelOrRank(node, data)">添加</el-button>
                                <el-button v-if="data.end == 1" type="text" size="mini" @click="editRankData(node, data)">编辑榜单</el-button>
                                <el-button type="text" size="mini" @click="changeLevelOrRank(node, data)">修改</el-button>
                                <el-button type="text" size="mini" @click="removeThisCatalog(node, data)">删除</el-button>
                            </div>
                        </span>
                    </el-tree>
                </div>

            </div>

            <!--榜单新建修改弹出层开始   所属页面级 0-->
            <el-dialog title="新增/修改榜单信息" :visible.sync="showAddOrChangeRankInfo" width="80%" :close-on-click-modal="false" :close-on-press-escape="false" :fullscreen="false" :show-close="false" >
                <el-form :model="rankInfoForm" :rules="rankInfoFormRules" ref="rankInfoForm" status-icon class="demo-ruleForm" label-width="20%" label-position="right" @submit.native.prevent style="margin-top:20px;">
                    <el-row class="el-row-h70">
                        <el-col :span="24">
                            <el-form-item prop="name" label="目录/榜单标题" style="margin:0;">
                                <el-input
                                clearable
                                type="text"
                                maxlength="80"
                                v-model="rankInfoForm.name"
                                auto-complete="off"></el-input>
                            </el-form-item>
                        </el-col>
                    </el-row>
                    <el-row class="el-row-h110">
                        <el-col :span="24">
                            <el-form-item label="目录/榜单描述" prop="description" style="margin:0;">
                                <el-input
                                type="textarea"
                                :autosize="{ minRows: 3}"
                                maxlength="200"
                                v-model="rankInfoForm.description"
                                auto-complete="off"></el-input>
                            </el-form-item>
                        </el-col>
                    </el-row>
                    <el-row class="el-row-h70">
                        <el-col :span="12">
                            <el-form-item prop="type" label-width="40%" label="类型" style="margin:0;">
                                <el-select v-model="rankInfoForm.type" style="width:100%;" :disabled="ifCreatOrChangeInfo == '1'">
                                    <el-option
                                        v-for="item in rankTypeOptions"
                                        :key="item.value"
                                        :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                            </el-form-item>
                        </el-col>
                        <el-col :span="12">
                            <el-form-item prop="orderType" label-width="40%" label="榜单序列" style="margin:0;">
                                <el-select v-model="rankInfoForm.orderType" style="width:100%;">
                                    <el-option
                                        v-for="item in rankOrderTypeOptions"
                                        :key="item.value"
                                        :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                            </el-form-item>
                        </el-col>
                    </el-row>
                    <el-row class="el-row-h70">
                        <el-col :span="24">
                            <el-form-item prop="weight" label="排序权重" style="margin:0;">
                                <el-input
                                type="text"
                                v-model="rankInfoForm.weight"
                                maxlength="6"
                                auto-complete="off"></el-input>
                            </el-form-item>
                        </el-col>
                    </el-row>
                    <el-row class="el-row-h70">
                        <el-col :span="24">
                            <el-form-item label="显示排序" prop="sortOrder" style="margin:0;">
                                <el-radio-group style="margin-top: 5px;" v-model="rankInfoForm.sortOrder">
                                    <el-radio label="1">显示</el-radio>
                                    <el-radio label="2">不显示</el-radio>
                                </el-radio-group>
                            </el-form-item>
                        </el-col>
                    </el-row>
                    <el-row class="el-row-h70" style="margin-top: 10px;">
                        <el-row>
                            <el-col class="el-row-h40" :span="3" :offset="8">
                                <el-button type="primary" style="width:100%" @click="saveRankInfoForm('rankInfoForm')">保存</el-button>
                            </el-col>
                            <el-col class="el-row-h40" :span="3" :offset="2">
                                <el-button type="primary" style="width:100%" @click="closeRankInfoForm('rankInfoForm')">取消</el-button>
                            </el-col>
                        </el-row>
                    </el-row>

                </el-form>
            </el-dialog>
            <!--榜单新建修改弹出层开始-->

        </div>
        <!--树形结构主页面结束 0 -->
        


        <!--机构榜单编辑子页面开始  1 -->
        <div v-show="showChildPage == 1">
            <div class="cv_content_square">
                <!--机构榜单搜索区-->
                <div class="cv_content_square">
                    <el-form :model="searchInstituteForm" status-icon class="demo-ruleForm" label-width="15%" label-position="right" @submit.native.prevent>
                        <el-row class="el-row-h60">
                            <el-col :span="16">
                                <el-form-item label="机构名称" style="margin:0;">
                                    <el-input
                                    clearable
                                    type="text"
                                    v-model="searchInstituteForm.name"
                                    auto-complete="off"></el-input>
                                </el-form-item>
                            </el-col>
                            <el-col :span="3" :offset="1" class="el-row-h40">
                                <el-button type="primary" style="width:100%" @click="searchCurrentInstitute()">搜索</el-button>
                            </el-col>
                            <el-col :span="3" :offset="1" class="el-row-h40">
                                <el-button style="width:100%" @click="backToRankListFromInstitute">返回</el-button>
                            </el-col>
                        </el-row>    
                    </el-form>
                </div>
                <!--功能按钮区-->
                <el-row class="el-row-h50">
                    <el-col :span="4">
                        <el-button type="primary" plain style="width:100%" icon="el-icon-plus" @click="addInstituteToRank">添加机构</el-button>
                    </el-col>
                </el-row>
                <!--表格查询结果区--不分页-->
                <div class="cv_content_square">
                    <el-table :data="currentInstituteTableData" style="width: 100%; margin:10px auto;" stripe>
                        <el-table-column prop="logoUrl" label="机构Logo" width="140">
                            <template v-if="scope.row.logoUrl" slot-scope="scope">
                                <div class="imgcontainer">
                                    <img :src="scope.row.logoUrl">
                                </div>
                            </template>
                        </el-table-column>
                        <el-table-column prop="name" label="机构名称" width=""></el-table-column>
                        <el-table-column prop="weight" label="排序" width="150">
                            <template slot-scope="scope">
                                <el-input type="text" maxlength="6" style="width: 100px;" v-model="scope.row.weight" auto-complete="off" @change="instituteRankWeightChange(scope.row)"></el-input>
                            </template>
                        </el-table-column>
                        <el-table-column label="操作" width="100" fixed="right">
                            <template slot-scope="scope">
                                <el-button type="text" size="small" @click="editThisInstituteFromRank(scope.row)">修改</el-button>
                                <el-button type="text" size="small" @click="delThisInstituteFromRank(scope.row)">删除</el-button>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>

                <!--机构库弹出层开始   所属页面级 1-->
                <el-dialog title="榜单机构库" :visible.sync="showInstituteLib" width="80%" :close-on-click-modal="false" :close-on-press-escape="false" :fullscreen="true" :show-close="false" >
                    <!--搜索区-->
                    <div class="cv_content_square">
                        <el-form :model="searchInstituteLibForm" status-icon class="demo-ruleForm" label-width="20%" label-position="right" @submit.native.prevent>
                            <el-row class="el-row-h60">
                                <el-col :span="16">
                                    <el-form-item label="机构名称" style="margin:0;">
                                        <el-input
                                        clearable
                                        type="text"
                                        v-model="searchInstituteLibForm.cooperationName"
                                        auto-complete="off"></el-input>
                                    </el-form-item>
                                </el-col>
                                <el-col :span="3" :offset="1" class="el-row-h40">
                                    <el-button type="primary" icon="el-icon-search" style="width:100%" @click="startSearchInstituteLib(0)">搜索</el-button>
                                </el-col>
                                <el-col :span="3" :offset="1" class="el-row-h40">
                                    <el-button style="width:100%" @click="backToInstituteRank()">返回</el-button>
                                </el-col>
                            </el-row>
                        </el-form>
                    </div>
                    <!--机构库列表-->
                    <div class="cv_content_square">
                        <el-table :data="instituteLibData" style="width: 100%; margin:10px auto;" ref="multipleTable" stripe>
                            <el-table-column prop="cooperationImg" label="机构Logo" width="150">
                                <template v-if="scope.row.cooperationImg" slot-scope="scope">
                                    <div class="imgcontainer">
                                        <img :src="scope.row.cooperationImg">
                                    </div>
                                </template>
                            </el-table-column>
                            <el-table-column prop="cooperationName" label="机构名称" width="">
                                <template v-if="scope.row.cooperationName" slot-scope="scope">
                                    <div v-html="scope.row.cooperationName"></div>
                                </template>
                            </el-table-column>
                            <el-table-column prop="cooperationModUserName" label="更新人" width="90"></el-table-column>
                            <el-table-column label="操作" width="100" fixed="right">
                                <template slot-scope="scope">
                                    <el-button type="text" size="small" @click="addThisInstituteToRank(scope.row)">添加</el-button>
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>
                    <!--分页器-->
                    <div class="cv_page_zone">
                        <el-pagination
                            @current-change="handleCurrentChange"
                            :current-page="pagination1.currPage"
                            :page-size="pagination1.pageSize"
                            layout="total, prev, pager, next, jumper"
                            :total="pagination1.totalCount">
                        </el-pagination>
                    </div>
                </el-dialog>
                <!--机构库弹出层结束   所属页面级 1-->
            </div>
        </div>
        <!--机构榜单编辑子页面结束  1 -->



        <!--人物榜单编辑子页面开始  2 -->
        <div v-show="showChildPage == 2">
            <div class="cv_content_square">
                <!--人物榜单搜索区-->
                <div class="cv_content_square">
                    <el-form :model="searchPeopleForm" status-icon class="demo-ruleForm" label-width="15%" label-position="right" @submit.native.prevent>
                        <el-row class="el-row-h60">
                            <el-col :span="16">
                                <el-form-item label="人物名称" style="margin:0;">
                                    <el-input
                                    clearable
                                    type="text"
                                    v-model="searchPeopleForm.name"
                                    auto-complete="off"></el-input>
                                </el-form-item>
                            </el-col>
                            <el-col :span="3" :offset="1" class="el-row-h40">
                                <el-button type="primary" style="width:100%" @click="searchCurrentPeople()">搜索</el-button>
                            </el-col>
                            <el-col :span="3" :offset="1" class="el-row-h40">
                                <el-button style="width:100%" @click="backToRankListFromPeople">返回</el-button>
                            </el-col>
                        </el-row>    
                    </el-form>
                </div>
                <!--功能按钮区-->
                <el-row class="el-row-h50">
                    <el-col :span="4">
                        <el-button type="primary" plain style="width:100%" icon="el-icon-plus" @click="addPeopleToRank">添加人物</el-button>
                    </el-col>
                </el-row>
                <!--表格查询结果区--不分页-->
                <div class="cv_content_square">
                    <el-table :data="currentPeopleTableData" style="width: 100%; margin:10px auto;" stripe>
                        <el-table-column prop="logoUrl" label="人物头像" width="140">
                            <template v-if="scope.row.logoUrl" slot-scope="scope">
                                <div class="imgcontainer_person">
                                    <img :src="scope.row.logoUrl">
                                </div>
                            </template>
                        </el-table-column>
                        <el-table-column prop="name" label="人物名称" width=""></el-table-column>
                        <el-table-column prop="institutionName" label="所在机构" width=""></el-table-column>
                        <el-table-column prop="weight" label="排序" width="150">
                            <template slot-scope="scope">
                                <el-input type="text" maxlength="6" style="width: 100px;" v-model="scope.row.weight" auto-complete="off" @change="peopleRankWeightChange(scope.row)"></el-input>
                            </template>
                        </el-table-column>
                        <el-table-column label="操作" width="100" fixed="right">
                            <template slot-scope="scope">
                                <el-button type="text" size="small" @click="editThisPeopleFromRank(scope.row)">修改</el-button>
                                <el-button type="text" size="small" @click="delThisPeopleFromRank(scope.row)">删除</el-button>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>

                <!--人物库弹出层开始   所属页面级 2-->
                <el-dialog title="榜单人物库" :visible.sync="showPeopleLib" width="80%" :close-on-click-modal="false" :close-on-press-escape="false" :fullscreen="true" :show-close="false" >
                    <!--搜索区-->
                    <div class="cv_content_square">
                        <el-form :model="searchPeopleLibForm" status-icon class="demo-ruleForm" label-width="20%" label-position="right" @submit.native.prevent>
                            <el-row class="el-row-h60">
                                <el-col :span="16">
                                    <el-form-item label="人物名称" style="margin:0;">
                                        <el-input
                                        clearable
                                        type="text"
                                        v-model="searchPeopleLibForm.guestName"
                                        auto-complete="off"></el-input>
                                    </el-form-item>
                                </el-col>
                                <el-col :span="3" :offset="1" class="el-row-h40">
                                    <el-button type="primary" icon="el-icon-search" style="width:100%" @click="startSearchPeopleLib(0)">搜索</el-button>
                                </el-col>
                                <el-col :span="3" :offset="1" class="el-row-h40">
                                    <el-button style="width:100%" @click="backToPeopleRank()">返回</el-button>
                                </el-col>
                            </el-row>
                        </el-form>
                    </div>
                    <!--人物库列表-->
                    <div class="cv_content_square">
                        <el-table :data="peopleLibData" style="width: 100%; margin:10px auto;" ref="multipleTable" stripe>
                            <el-table-column prop="guestImg" label="人物头像" width="150">
                                <template v-if="scope.row.guestImg" slot-scope="scope">
                                    <div class="imgcontainer_person">
                                        <img :src="scope.row.guestImg">
                                    </div>
                                </template>
                            </el-table-column>
                            <el-table-column prop="guestName" label="人物名称" width=""></el-table-column>
                            <el-table-column prop="guestModUserName" label="更新人" width="90"></el-table-column>
                            <el-table-column label="操作" width="100" fixed="right">
                                <template slot-scope="scope">
                                    <el-button type="text" size="small" @click="addThisPeopleToRank(scope.row)">添加</el-button>
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>
                    <!--分页器-->
                    <div class="cv_page_zone">
                        <el-pagination
                            @current-change="handleCurrentChange2"
                            :current-page="pagination2.currPage"
                            :page-size="pagination2.pageSize"
                            layout="total, prev, pager, next, jumper"
                            :total="pagination2.totalCount">
                        </el-pagination>
                    </div>
                </el-dialog>
                <!--人物库弹出层结束   所属页面级 2-->
            </div>
        </div>
        <!--人物榜单编辑子页面结束  2 -->

        

        <!--案例榜单编辑子页面开始  3 -->
        <div v-show="showChildPage == 3">
            <div class="cv_content_square">
                <!--案例榜单搜索区-->
                <div class="cv_content_square">
                    <el-form :model="searchCaseForm" status-icon class="demo-ruleForm" label-width="15%" label-position="right" @submit.native.prevent>
                        <el-row class="el-row-h60">
                            <el-col :span="16">
                                <el-form-item label="案例名称" style="margin:0;">
                                    <el-input
                                    clearable
                                    type="text"
                                    v-model="searchCaseForm.name"
                                    auto-complete="off"></el-input>
                                </el-form-item>
                            </el-col>
                            <el-col :span="3" :offset="1" class="el-row-h40">
                                <el-button type="primary" style="width:100%" @click="searchCurrentCase()">搜索</el-button>
                            </el-col>
                            <el-col :span="3" :offset="1" class="el-row-h40">
                                <el-button style="width:100%" @click="backToRankListFromCase">返回</el-button>
                            </el-col>
                        </el-row>    
                    </el-form>
                </div>
                <!--功能按钮区-->
                <el-row class="el-row-h50">
                    <el-col :span="4">
                        <el-button type="primary" plain style="width:100%" icon="el-icon-plus" @click="addOrEditCaseToRank(0)">添加案例</el-button>
                    </el-col>
                </el-row>
                <!--表格查询结果区--不分页-->
                <div class="cv_content_square">
                    <el-table :data="currentCaseTableData" style="width: 100%; margin:10px auto;" stripe>
                        <el-table-column prop="name" label="案例名称" width=""></el-table-column>
                        <el-table-column prop="title" label="是否为表头" width="140">
                            <template v-if="scope.row.title" slot-scope="scope">
                                <el-tag v-if="scope.row.title == 1" type="success">表格头部</el-tag>
                                <el-tag v-if="scope.row.title == 0">数据</el-tag>
                            </template>
                        </el-table-column>
                        <el-table-column prop="weight" label="排序" width="150">
                            <template slot-scope="scope">
                                <el-input :disabled="scope.row.title == 1" type="text" maxlength="6" style="width: 100px;" v-model="scope.row.weight" auto-complete="off" @change="caseRankWeightChange(scope.row)"></el-input>
                            </template>
                        </el-table-column>
                        <el-table-column label="操作" width="150" fixed="right">
                            <template slot-scope="scope">
                                <el-button type="text" size="small" @click="addOrEditCaseToRank(scope.row)">编辑</el-button>
                                <el-button type="text" size="small" @click="delThisCaseFromRank(scope.row)">删除</el-button>
                                <!-- <span v-if="scope.row.title !== '1'" style="padding-left: 5px;"> -->
                                    <el-button type="text" size="small" @click="editInstituteToCaseItem(scope.row)">关联机构</el-button>
                                <!-- </span> -->
                            </template>
                        </el-table-column>
                    </el-table>
                </div>
                
                <!--新建编辑单条案例弹框开始   所属页面级 3-->
                <el-dialog title="新建/编辑案例" :visible.sync="showAddOrEditCase" width="80%" :close-on-click-modal="false" :close-on-press-escape="false" :fullscreen="false" :show-close="false" >
                    <el-form :model="singleCaseForm" :rules="singleCaseFormRules"  ref="singleCaseForm" status-icon class="demo-ruleForm" label-width="15%" label-position="right" >
                        <el-row class="el-row-h70">
                            <el-col :span="24">
                                <el-form-item label="案例名称" prop="name" style="margin:0;">
                                    <el-input
                                    clearable
                                    type="text"
                                    v-model="singleCaseForm.name"
                                    maxlength="36"
                                    auto-complete="off"></el-input>
                                </el-form-item>
                            </el-col>
                        </el-row>
                        <el-row class="el-row-h70">
                            <el-col :span="24">
                                <el-form-item label="排序" prop="weight" style="margin:0;">
                                    <el-input
                                    :disabled="singleCaseForm.title == 1"
                                    type="text"
                                    v-model="singleCaseForm.weight"
                                    maxlength="6"
                                    auto-complete="off"></el-input>
                                </el-form-item>
                            </el-col>
                        </el-row>
                        <el-row class="el-row-h70">
                            <el-col :span="24">
                                <el-form-item label="是否为表头" prop="title" style="margin:0;">
                                    <el-radio-group style="margin-top: 5px;" v-model="singleCaseForm.title" @change="ifTitleChange">
                                        <el-radio label="0">数据</el-radio>
                                        <el-radio label="1">表头</el-radio>
                                    </el-radio-group>
                                </el-form-item>
                            </el-col>
                        </el-row>
                        <el-row class="el-row-h70" style="margin-top: 10px;">
                            <el-row>
                                <el-col class="el-row-h40" :span="3" :offset="8">
                                    <el-button type="primary" style="width:100%" @click="ifSaveSingleCaseForm('singleCaseForm')">保存</el-button>
                                </el-col>
                                <el-col class="el-row-h40" :span="3" :offset="2">
                                    <el-button type="primary" style="width:100%" @click="closeSingleCaseForm('singleCaseForm')">取消</el-button>
                                </el-col>
                            </el-row>
                        </el-row>
                        
                    </el-form>
                </el-dialog>
                <!--新建编辑单条案例弹框结束   所属页面级 3-->

                <!--关联单条案例弹框开始   所属页面级 3-->
                <el-dialog title="关联机构" :visible.sync="showCaseConnectPage" width="80%" :close-on-click-modal="false" :close-on-press-escape="false" :fullscreen="true" :show-close="false" >
                    <!--功能按钮区-->
                    <el-row class="el-row-h50">
                        <el-col :span="4">
                            <el-button type="primary" style="width:100%" icon="el-icon-plus" @click="addInstituteToThisCase()">添加机构</el-button>
                        </el-col>
                        <el-col :offset="16" :span="4">
                            <el-button type="" plain style="width:100%" @click="backToInstituteToCaseList()">返回</el-button>
                        </el-col>
                    </el-row>
                    <!--表格查询结果区--不分页-->
                    <div class="cv_content_square">
                        <el-table :data="caseInstitutionTableData" style="width: 100%; margin:10px auto;" stripe>
                            <el-table-column prop="logoUrl" label="机构Logo" width="140">
                                <template v-if="scope.row.logoUrl" slot-scope="scope">
                                    <div class="imgcontainer">
                                        <img :src="scope.row.logoUrl">
                                    </div>
                                </template>
                            </el-table-column>
                            <el-table-column prop="name" label="机构名称" width=""></el-table-column>
                            <el-table-column prop="weight" label="排序" width="150">
                                <template slot-scope="scope">
                                    <el-input type="text" maxlength="6" style="width: 100px;" v-model="scope.row.weight" auto-complete="off" @change="caseRankInstituteWeightChange(scope.row)"></el-input>
                                </template>
                            </el-table-column>
                            <el-table-column label="操作" width="100" fixed="right">
                                <template slot-scope="scope">
                                    <el-button type="text" size="small" @click="editThisInstituteFromCase(scope.row)">修改</el-button>
                                    <el-button type="text" size="small" @click="delThisInstituteFromCase(scope.row)">删除</el-button>
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>
                    
                </el-dialog>
                <!--关联单条案例弹框结束   所属页面级 3-->

                <!--机构库弹出层开始   所属页面级 3-->
                <el-dialog title="榜单机构库" :visible.sync="showCaseInstitutionCaseLib" width="80%" :close-on-click-modal="false" :close-on-press-escape="false" :fullscreen="true" :show-close="false" >
                    <!--搜索区-->
                    <div class="cv_content_square">
                        <el-form :model="searchCaseInstitutionLibForm" status-icon class="demo-ruleForm" label-width="20%" label-position="right" @submit.native.prevent>
                            <el-row class="el-row-h60">
                                <el-col :span="16">
                                    <el-form-item label="机构名称" style="margin:0;">
                                        <el-input
                                        clearable
                                        type="text"
                                        v-model="searchCaseInstitutionLibForm.cooperationName"
                                        auto-complete="off"></el-input>
                                    </el-form-item>
                                </el-col>
                                <el-col :span="3" :offset="1" class="el-row-h40">
                                    <el-button type="primary" icon="el-icon-search" style="width:100%" @click="startSearchInstituteLib2(0)">搜索</el-button>
                                </el-col>
                                <el-col :span="3" :offset="1" class="el-row-h40">
                                    <el-button style="width:100%" @click="backToInstituteCase()">返回</el-button>
                                </el-col>
                            </el-row>
                        </el-form>
                    </div>
                    <!--机构库列表-->
                    <div class="cv_content_square">
                        <el-table :data="caseInstitutionLibData" style="width: 100%; margin:10px auto;" ref="multipleTable" stripe>
                            <el-table-column prop="cooperationImg" label="机构Logo" width="150">
                                <template v-if="scope.row.cooperationImg" slot-scope="scope">
                                    <div class="imgcontainer">
                                        <img :src="scope.row.cooperationImg">
                                    </div>
                                </template>
                            </el-table-column>
                            <el-table-column prop="cooperationName" label="机构名称" width="">
                                <template v-if="scope.row.cooperationName" slot-scope="scope">
                                    <div v-html="scope.row.cooperationName"></div>
                                </template>
                            </el-table-column>
                            <el-table-column prop="cooperationModUserName" label="更新人" width="90"></el-table-column>
                            <el-table-column label="操作" width="100" fixed="right">
                                <template slot-scope="scope">
                                    <el-button type="text" size="small" @click="addThisInstituteToCase(scope.row)">添加</el-button>
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>
                    <!--分页器-->
                    <div class="cv_page_zone">
                        <el-pagination
                            @current-change="handleCurrentChange3"
                            :current-page="pagination3.currPage"
                            :page-size="pagination3.pageSize"
                            layout="total, prev, pager, next, jumper"
                            :total="pagination3.totalCount">
                        </el-pagination>
                    </div>
                </el-dialog>
                <!--机构库弹出层结束   所属页面级 3-->


            </div>
        </div>


        <!--服务机构榜单编辑子页面开始  4 -->
        <div v-show="showChildPage == 4">
            <div class="cv_content_square">
                <!--服务榜单搜索区-->
                <div class="cv_content_square">
                    <el-form :model="searchServingForm" status-icon class="demo-ruleForm" label-width="15%" label-position="right" @submit.native.prevent>
                        <el-row class="el-row-h60">
                            <el-col :span="16">
                                <el-form-item label="名称" style="margin:0;">
                                    <el-input
                                    clearable
                                    type="text"
                                    v-model="searchServingForm.name"
                                    auto-complete="off"></el-input>
                                </el-form-item>
                            </el-col>
                            <el-col :span="3" :offset="1" class="el-row-h40">
                                <el-button type="primary" style="width:100%" @click="searchCurrentServing()">搜索</el-button>
                            </el-col>
                            <el-col :span="3" :offset="1" class="el-row-h40">
                                <el-button style="width:100%" @click="backToRankListFromServing">返回</el-button>
                            </el-col>
                        </el-row>    
                    </el-form>
                </div>
                <!--功能按钮区-->
                <el-row class="el-row-h50">
                    <el-col :span="5">
                        <el-button type="primary" plain style="width:100%" icon="el-icon-plus" @click="addOrEditServingToRank(0)">添加服务机构</el-button>
                    </el-col>
                </el-row>
                <!--表格查询结果区--不分页-->
                <div class="cv_content_square">
                    <el-table :data="currentServingTableData" style="width: 100%; margin:10px auto;" stripe>
                        <el-table-column prop="name" label="名称" width=""></el-table-column>
                        <el-table-column prop="weight" label="排序" width="150">
                            <template slot-scope="scope">
                                <el-input :disabled="scope.row.title == 1" type="text" maxlength="6" style="width: 100px;" v-model="scope.row.weight" auto-complete="off" @change="servingRankWeightChange(scope.row)"></el-input>
                            </template>
                        </el-table-column>
                        <el-table-column prop="title" label="是否为表头" width="140">
                            <template v-if="scope.row.title" slot-scope="scope">
                                <el-tag v-if="scope.row.title == 1" type="success">表格头部</el-tag>
                                <el-tag v-if="scope.row.title == 0">数据</el-tag>
                            </template>
                        </el-table-column>
                        <el-table-column label="操作" width="100" fixed="right">
                            <template slot-scope="scope">
                                <el-button type="text" size="small" @click="addOrEditServingToRank(scope.row)">编辑</el-button>
                                <el-button type="text" size="small" @click="delThisServingFromRank(scope.row)">删除</el-button>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>

                <!--新建编辑单条服务机构弹框开始   所属页面级 4-->
                <el-dialog title="新建/编辑服务机构" :visible.sync="showAddOrEditServing" width="80%" :close-on-click-modal="false" :close-on-press-escape="false" :fullscreen="false" :show-close="false" >
                    <el-form :model="servingForm" :rules="servingFormRules"  ref="servingForm" status-icon class="demo-ruleForm" label-width="15%" label-position="right" >
                        <el-row class="el-row-h70">
                            <el-col :span="24">
                                <el-form-item label="名称" prop="name" style="margin:0;">
                                    <el-input
                                    clearable
                                    type="text"
                                    v-model="servingForm.name"
                                    maxlength="36"
                                    auto-complete="off"></el-input>
                                </el-form-item>
                            </el-col>
                        </el-row>
                        <el-row class="el-row-h70">
                            <el-col :span="24">
                                <el-form-item label="排序" prop="weight" style="margin:0;">
                                    <el-input
                                    :disabled="servingForm.title == 1"
                                    type="text"
                                    v-model="servingForm.weight"
                                    maxlength="6"
                                    auto-complete="off"></el-input>
                                </el-form-item>
                            </el-col>
                        </el-row>
                        <el-row class="el-row-h70">
                            <el-col :span="24">
                                <el-form-item label="是否为表头" prop="title" style="margin:0;">
                                    <el-radio-group style="margin-top: 5px;" v-model="servingForm.title" @change="ifTitleChange2">
                                        <el-radio label="0">数据</el-radio>
                                        <el-radio label="1">表头</el-radio>
                                    </el-radio-group>
                                </el-form-item>
                            </el-col>
                        </el-row>
                        <el-row class="el-row-h70" style="margin-top: 10px;">
                            <el-row>
                                <el-col class="el-row-h40" :span="3" :offset="8">
                                    <el-button type="primary" style="width:100%" @click="ifsaveSingleServingForm('servingForm')">保存</el-button>
                                </el-col>
                                <el-col class="el-row-h40" :span="3" :offset="2">
                                    <el-button type="primary" style="width:100%" @click="closeSingleServingForm('servingForm')">取消</el-button>
                                </el-col>
                            </el-row>
                        </el-row>
                        
                    </el-form>
                </el-dialog>
                <!--新建编辑单条服务机构弹框结束   所属页面级 4-->

            </div>
        </div>
        <!--服务机构榜单编辑子页面结束  4 -->


    </div>
</body>

<script type="text/javascript" src="${request.contextPath}/statics/js/element.js"></script>
<script type="text/javascript" src="${request.contextPath}/statics/js/modules/rank/edit_rank.js"></script>
<script type="text/javascript" src="${request.contextPath}/statics/js/clockToast.js"></script>
<style>
.imgcontainer{
    width:100px;
    height:50px;
    display:flex;
    align-items:center;
    justify-content:center;
	border:1px solid #bebebe;
}
.imgcontainer img{
    max-width: 100%;
    max-height: 100%;
    height: auto;
}
.imgcontainer_person {
    width:50px;
    height:50px;
    display:flex;
    align-items:center;
    justify-content:center;
	border:1px solid #bebebe;
}
.imgcontainer_person img{
    max-width: 100%;
    max-height: 100%;
    height: auto;
}
.custom-tree-node {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 14px;
    height: 30px;
    line-height: 30px;
}
.scaleNum .el-input__inner{
    text-align: center;
}
</style>
</html>